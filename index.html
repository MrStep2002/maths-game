

<!DOCTYPE html>
<html>
<head>
  <title>Quick Maths Game</title>
  <style>
    body {
      font-family: sans-serif;
      max-width: 500px;
      margin: auto;
      padding: 20px;
      text-align: center;
    }
    input[type="text"], input[type="number"] {
      font-size: 1.2em;
      width: 200px;
      text-align: center;
      margin-bottom: 10px;
    }
    button {
      font-size: 1em;
      margin-top: 10px;
    }
    #feedback, #score, #timer {
      margin-top: 15px;
      font-weight: bold;
    }
    #highscores {
      margin-top: 30px;
      text-align: left;
    }
  </style>
</head>
<body>
  <h2>Quick Maths Game</h2>
  <div>
    <input type="text" id="username" placeholder="Enter your name" />
    <br />
    <button onclick="startGame()">Start Game</button>
  </div>

  <div id="game" style="display:none;">
    <div id="timer">Time: 7</div>
    <div id="question">Loading...</div>
    <input type="number" id="answer" placeholder="Answer" />
    <br />
    <button onclick="checkAnswer()">Submit</button>
    <div id="feedback"></div>
    <div id="score">Score: 0</div>
  </div>

  <div id="highscores">
    <h3>High Scores</h3>
    <table border="1" style="margin:auto;">
      <thead><tr><th>Name</th><th>Score</th></tr></thead>
      <tbody id="scores-table">
      </tbody>
    </table>
  </div>

  <script>
    let correctAnswer, timer, timeLeft, score = 0;
    let displayOperator = '';

    function generateQuestion() {
      const operators = ['+', '-', '*', '/'];
      let op = operators[Math.floor(Math.random() * operators.length)];
      let a, b;

      if (op === '+' || op === '-') {
        a = Math.floor(Math.random() * 30) + 1;
        b = Math.floor(Math.random() * 30) + 1;
        if (op === '-' && a < b) {
          [a, b] = [b, a]; // avoid negative answers
        }
      } else if (op === '*') {
        a = Math.floor(Math.random() * 12) + 1;
        b = Math.floor(Math.random() * 12) + 1;
      } else if (op === '/') {
        b = Math.floor(Math.random() * 12) + 1;
        correctAnswer = Math.floor(Math.random() * 12) + 1;
        a = b * correctAnswer;
      }

      correctAnswer = correctAnswer ?? eval(`${a} ${op} ${b}`);
      displayOperator = op === '*' ? 'Ã—' : op;

      document.getElementById('question').innerText = `${a} ${displayOperator} ${b}`;
      resetTimer();
      focusInput();
    }

    function startGame() {
      const name = document.getElementById('username').value.trim();
      if (!name) {
        alert("Please enter your name.");
        return;
      }
      score = 0;
      document.getElementById('score').innerText = `Score: ${score}`;
      document.getElementById('game').style.display = 'block';
      document.getElementById('feedback').innerText = '';
      generateQuestion();
    }

    function checkAnswer() {
      clearInterval(timer);
      const userAnswer = parseFloat(document.getElementById('answer').value);
      if (Math.abs(userAnswer - correctAnswer) < 0.01) {
        score++;
        document.getElementById('score').innerText = `Score: ${score}`;
        document.getElementById('answer').value = '';
        generateQuestion();
      } else {
        endGame();
      }
    }

    function resetTimer() {
      clearInterval(timer);
      timeLeft = 7;
      document.getElementById('timer').innerText = `Time: ${timeLeft}`;
      timer = setInterval(() => {
        timeLeft--;
        document.getElementById('timer').innerText = `Time: ${timeLeft}`;
        if (timeLeft <= 0) {
          clearInterval(timer);
          endGame();
        }
      }, 1000);
    }

    function endGame() {
      document.getElementById('feedback').innerText = `Game over! Final score: ${score}`;
      document.getElementById('game').style.display = 'none';
      const name = document.getElementById('username').value.trim();
      updateHighScores(name, score);
    }

    function updateHighScores(name, score) {
      const table = document.getElementById('scores-table');
      const row = table.insertRow();
      row.insertCell(0).innerText = name;
      row.insertCell(1).innerText = score;
    }

    function focusInput() {
      const input = document.getElementById('answer');
      input.focus();
    }

    document.addEventListener("DOMContentLoaded", () => {
      const input = document.getElementById('answer');
      input.addEventListener("keyup", function(event) {
        if (event.key === "Enter") {
          checkAnswer();
        }
      });
    });
  </script>
</body>
</html>
